<!DOCTYPE html>
<html lang="en">
<head>
    <title>AoC - Day 6 part I</title>
    <script src="../lib/js/resultDisplay.js"></script>
    <link rel="stylesheet" href="../Style/style.css">
</head>

<body>
    <div id="card">
        <a href="../index.html" class="homeLink">→ Home</a>
        <a href="part2.html" class="homeLink">→ Part II</a>
        <h1>Advent of Code - Day 6 part I</h1>
        <textarea id="input" placeholder="Enter your input here (e.g., '7 6 4 2 1\n1 2 7 8 9')"></textarea>
        <button class="button" type="button" onclick="strParse()">Test</button>
        <script>
            function directionCheck (arr, dir, line, column) {
                let lineCopy = line;
                let columnCopy = column;
                let movesCount = 0;

                if (dir == "up") {
                    do {
                        lineCopy--
                        movesCount++
                    } while (arr[lineCopy][columnCopy] !== "#" && lineCopy > 0);

                    dir = "right";

                    return [dir, lineCopy, columnCopy, movesCount];
                } else if (dir == "right") {
                    do {
                        columnCopy++
                        movesCount++
                    } while (arr[lineCopy][columnCopy] !== "#" && columnCopy < arr[lineCopy].length - 1);

                    dir = "down";

                    return [dir, lineCopy, columnCopy, movesCount];
                } else if (dir == "down") {
                    do {
                        lineCopy++
                        movesCount++
                    } while (arr[lineCopy][columnCopy] !== "#" && lineCopy < arr.length - 1);

                    dir = "left";

                    return [dir, lineCopy, columnCopy, movesCount];
                } else if (dir == "left") {
                    do {
                        columnCopy--
                        movesCount++
                    } while (arr[lineCopy][columnCopy] !== "#" && columnCopy > 0);

                    dir = "up";

                    return [dir, lineCopy, columnCopy, movesCount];
                }
            }

            function strParse() {
                let result = 0;
                let startPos = [];
                let movingCoordinates = [];
                let dir = "up"

                const inputSrc = document.getElementById('input').value;

                const strArr = inputSrc.split('\n');
                const map = strArr.map(line => line.trim().split(''));

                for (let line = 0; line < map.length; line++) {
                    for (let column = 0; column < map[line].length; column++) {
                        if (map[line][column] == "^") {
                            startPos = [line, column];
                            movingCoordinates = [line, column];
                            break;
                        }
                    }
                }

                console.log({start_y: startPos[0], start_x: startPos[1]});

                do {
                    let moves = 0;
                    [dir, movingCoordinates[0], movingCoordinates[1], moves] = directionCheck(map, dir, movingCoordinates[0], movingCoordinates[1]);
                    result += moves;
                } while ((movingCoordinates[0] >= 0 && movingCoordinates[0] <= map.length - 1) && (movingCoordinates[1] >= 0 && movingCoordinates[1] <= map[movingCoordinates[0]].length - 1));

                resultDisplay(result); // Display the result
            }
        </script>
        <div id="resultDisplay">
            <!-- Result display -->
        </div>
    </div>
</body>
</html>